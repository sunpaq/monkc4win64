/*
 ============================================================================
 Name        : monkc4winExample.c
 Author      : sunpaq
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>

#include "HiWin.h"

#include "Monkey.h"
#include "MonkeyExt.h"
#include "MCContext.h"

void testOOP()
{
	Monkey* m = new(Monkey);
	//static call
	Monkey_info(m, 0);

	//dynamic call
	ff(m, showage, 0);
	ff(m, showname, 0);

	//call protocal Flyable
	ff(m, fly, 0);
	ff(m, takeoff, "yeah!");
	ff(m, landing, "OK");

	//call extensions
	ff(m, extensionMethod, 0);
	ff(m, extensionFunction, 0);

	//call an wrong method name
	ff(m, typo, 0);

	printf("%s\n", "finish");
}

int main(int argc, char const *argv[])
{
	HiWin* hi = ff(new(HiWin), initWithName, "Steve");

	HiWin_sayHello(hi, 0);
	ff(hi, sayHello, 0);

	extend(Monkey, Ext);

	MCContext* ctx = MCContext_newWithArgs(argc, (char**)argv);
	char c = MCContext_showMenuAndGetSelectionChar(4,
		"test OOP",
		"Male",
		"Female",
		"Unknown");

	switch(c) {
		case '1':
			testOOP();
			break;
		case '2':
			printf("%s\n", "Hi, boy!");
			break;
		case '3':
			printf("%s\n", "welcome, girl!");
			break;
		case '4':
			printf("%s\n", "Hey, welcome!");
			break;
		default:
			break;
	}

	return EXIT_SUCCESS;
}
